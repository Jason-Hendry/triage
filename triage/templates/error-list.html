{% extends "layout/fluid-sidebar.html" %}

{% block sidebar %}

	<form action="" method="POST">
		<input type="text" name="search" placeholder="Search">
	</form>

	{{ super() }}

{% endblock %}


{% block navigation %}

	<div id="navigation" class="cf">
		<ul class="pills">
			<li {% if show == 'all' %}class="active"{% endif %}><a href="?show=all">All ({{ get_error_count('all') }})</a></li>
			<li {% if show == 'mine' %}class="active"{% endif %}><a href="?show=mine">Mine ({{ get_error_count('mine') }})</a></li>
			<li {% if show == 'unclaimed' %}class="active"{% endif %}><a href="?show=unclaimed">Unclaimed ({{ get_error_count('unclaimed') }})</a></li>
			<li {% if show == 'hidden' %}class="active"{% endif %}><a href="?show=hidden">Hidden ({{ get_error_count('hidden') }})</a></li>			
		</ul>
	</div>

{% endblock %}


{% block content %}

<div id="information">

	<table class="bordered-table zebra-striped">

		<thead>
			<tr>
				<!-- <th></th> -->
				<th></th>
				<th>Latest Message</th>
				<th>Type</th>
				<th>First seen</th>				
				<th>Last seen</th>
				<th>Tags</th>
			</tr>
		</thead>

		<tbody>
			{% for error in errors %}
				<tr class="{{error.get_row_classes(user)}}">
					<!-- <td class="center"><input type="checkbox" name="error[]"></td> -->
					<td>{{ error.count|int }}</td>
					<td><a href="{{route_url('error_view', project=selected_project.id, id=error._id)}}" title="error.value.message">{{ error.message|truncate(length=130) }}</a></td>					
					<td>{{ error.type }}</td>
					<td>
						<span data-timeago="{{ error.timefirst }}"></span>
					</td>
					<td>
						<span data-timeago="{{ error.timelatest }}"></span>
					</td>					
					<td>
						{% if error.tags %}
							{% for tag in error.tags %}
								<a href="{{route_url('tag_view', project=selected_project.id, tag=tag)}}"><span class="label {{tag.lower()}}">{{tag}}</span></a>
							{% endfor %}
						{% endif %}
					</td>
				</tr>
			{% endfor %}
		</tbody>

	</table>

	{% include 'layout/paginator.html' %}

</div>

{% endblock %}
